# Phase 1: Foundation - Context

**Gathered:** 2026-02-05
**Status:** Ready for planning

<domain>
## Phase Boundary

Style exemplar 인프라, 계층형 컨텍스트 관리, 장면 데이터 모델을 구축한다. 기존 파이프라인(0~4단계: 브레인스토밍~플롯)은 그대로 유지하고, 집필 에이전트가 사용할 기반 인프라만 새로 만든다. v5.0은 기존 v3.x를 완전 교체하며, 새 프로젝트에만 적용된다.

</domain>

<decisions>
## Implementation Decisions

### Style Library (스타일 라이브러리)
- 초기 데이터: 기본 큐레이션 제공 + 사용자 직접 수집 모두 지원
- 분류 체계: Claude 재량 (연구 결과 기반 최적 분류 설계)
- exemplar 길이: 장면 단위 (500~1500자) — 완전한 장면 흐름을 보여줄 수 있는 수준
- Anti-exemplar: Claude 재량 (연구 결과 기반 판단)

### Context Manager (컨텍스트 매니저)
- 핫 컨텍스트 구성: Claude 재량 (연구 결과 기반 최적 구성)
- 웜 컨텍스트 슬라이딩 윈도우: 5챕터 (요구사항의 3챕터에서 확대)
- 캐릭터 정보: 압축하지 않음 — 2000토큰 수준 원본 유지 (캐릭터의 지능, 말투, 행동, 개성, 습관 등 온전한 정보 필요)
- 전체적 토큰 전략: 여유롭게 — 공격적 압축보다 충분한 컨텍스트 제공 우선

### Scene Data Model (장면 데이터 모델)
- 분해 기준: 플롯 비트 기반 (기존 chapter_NNN.json의 플롯 비트를 활용)
- 챕터당 장면 수: Claude 재량 (챕터 길이와 복잡도에 따라 적응적 결정)
- 장면 간 전환: Claude 재량 (최적 트랜지션 처리 방식 설계)
- 기존 스키마 호환: Claude 재량 (호환성과 새 기능의 균형 설계)

### System Integration (기존 시스템 통합)
- 마이그레이션: 불필요 — 새 프로젝트에만 v5.0 적용
- 파이프라인 전략: 완전 교체 — v3.x 집필 파이프라인을 v5.0으로 대체 (공존 없음)
- 에이전트 구성: Claude 재량 (연구 결과 기반 최적 에이전트 구성 설계)

### Claude's Discretion
- exemplar 분류 체계 설계 (장르, 장면유형, 감정톤 등 차원 결정)
- anti-exemplar 포함 여부 및 방식
- 핫 컨텍스트 구성 요소
- 장면 수, 전환 처리, 스키마 호환 방식
- 에이전트 재구성 (통합/분리/추가)

</decisions>

<specifics>
## Specific Ideas

- 캐릭터 정보는 소설 품질의 핵심이므로 절대 압축하지 않음. 200토큰 voice card 방식은 채택하지 않고, 캐릭터의 개성(지능, 말투, 행동, 습관 등)을 온전히 보존하는 2000토큰 수준 유지.
- 슬라이딩 윈도우를 3챕터에서 5챕터로 확대하여 복선 회수와 장편 일관성 강화.
- 기존 chapter_NNN.json의 플롯 비트를 장면 분해의 자연스러운 기준으로 활용.
- **핵심 설계 원칙**: 캐릭터/세계관 등 수많은 메타데이터 → 상세한 플롯 → 챕터 집필의 흐름. 플롯이 완벽해야 독립적으로 생성된 챕터들도 연결성, 일관성, 개연성이 완벽하게 유지됨. 따라서 컨텍스트 매니저는 플롯 정보를 충분히 제공하여 각 장면/챕터가 독립 집필되더라도 전체 서사의 일관성을 보장해야 함.

</specifics>

<deferred>
## Deferred Ideas

None — 논의가 Phase 1 범위 내에서 진행됨.

</deferred>

---

*Phase: 01-foundation*
*Context gathered: 2026-02-05*
