# Review Skill - Detailed Guide

## 목적

`review` 스킬은 설계 결과물(캐릭터, 플롯, 세계관 등)을 **다각도로 검토**하고 **승인/거부 판정**을 내리는 품질 게이트입니다.

## 핵심 차별점

| 스킬 | 목적 | 타이밍 | 출력 | 판정 |
|------|------|--------|------|------|
| **review** | 설계 승인/거부 | 설계 완료 후 | 점수 + 판정 | YES/NO |
| **analyze** | 문제 진단 | 언제든지 | 분석 보고서 | 없음 |
| **evaluate** | 완성도 평가 | 집필 완료 후 | 점수 + 품질 | 참고용 |
| **consistency-check** | 오류 탐지 | 집필 중/후 | 오류 목록 | 없음 |

## Review의 핵심: 다각도 병렬 검토

review 스킬의 차별점은 **3개 에이전트를 병렬로 실행**하여 다른 관점에서 동시에 평가한다는 것입니다.

```
        설계 결과물
              |
    +---------+---------+
    |         |         |
  Critic  Beta-Reader  Genre
    |         |         |
 기술적    독자 경험   장르
  품질                적합성
    |         |         |
    +---------+---------+
              |
         결과 종합
              |
    APPROVED / REVISE / REJECT
```

### 왜 3개 관점인가?

1. **Critic (기술적 품질)**: "잘 만들어졌는가?"
   - 일관성, 논리성, 완성도
   - 오류, 누락, 모순 탐지

2. **Beta-Reader (독자 경험)**: "독자가 좋아할까?"
   - 매력도, 공감성, 독창성
   - 상업성, 몰입도

3. **Genre-Validator (장르 적합성)**: "장르에 맞는가?"
   - 필수 트로프, 장르 규칙
   - 독자 기대 충족, 차별화

한 관점만으로는 충분하지 않습니다:
- Critic만: 기술적으로 완벽해도 독자가 싫어할 수 있음
- Beta-Reader만: 매력적이어도 기술적 결함이 있을 수 있음
- Genre-Validator만: 장르에 맞아도 재미없을 수 있음

## 판정 시스템

### 점수 계산

```typescript
totalScore = (
  critic.score * 0.4 +        // 기술적 품질 40%
  betaReader.score * 0.35 +   // 독자 경험 35%
  genreValidator.score * 0.25 // 장르 적합성 25%
)
```

**가중치 설명**:
- 기술적 품질이 가장 중요 (40%): 결함이 있으면 나머지가 무의미
- 독자 경험이 두 번째 (35%): 상업적 성공의 핵심
- 장르 적합성이 세 번째 (25%): 중요하지만 창의적 일탈 가능

### 판정 기준

| 점수 | 판정 | 의미 | 다음 단계 |
|------|------|------|-----------|
| 80-100 | **APPROVED** | 승인됨, 진행 OK | 집필 시작 |
| 60-79 | **REVISE** | 조건부 승인, 개선 권장 | 수정 후 재검토 또는 진행 |
| 0-59 | **REJECT** | 거부됨, 재설계 필요 | 재설계 필수 |

**엄격 모드 (`--strict`)**:
- APPROVED: 85점 이상
- REVISE: 70-84점
- REJECT: 70점 미만

### 신뢰도 시스템

3개 리뷰 간 점수 편차로 판정의 신뢰도 측정:

```typescript
scores = [critic.score, betaReader.score, genreValidator.score]
variance = calculateVariance(scores)

if (variance < 15) {
  confidence = "HIGH"      // 리뷰가 거의 일치
} else if (variance < 30) {
  confidence = "MEDIUM"    // 약간의 의견 차이
} else {
  confidence = "LOW"       // 의견이 크게 갈림
}
```

**신뢰도 해석**:

**HIGH (편차 <15)**:
```
3개 리뷰가 거의 일치합니다. 판정을 신뢰할 수 있습니다.

예시:
- Critic: 82점
- Beta-Reader: 85점
- Genre-Validator: 80점
→ 편차: 5 (매우 일치)
```

**MEDIUM (편차 15-30)**:
```
리뷰 간 약간의 의견 차이가 있습니다.
판정은 참고용으로 활용하고, 직접 판단하세요.

예시:
- Critic: 75점
- Beta-Reader: 85점
- Genre-Validator: 65점
→ 편차: 20 (보통)
```

**LOW (편차 >30)**:
```
⚠️ 리뷰 간 의견이 크게 갈립니다.
각 리뷰를 개별적으로 검토하고 우선순위를 판단하세요.

예시:
- Critic: 90점 (기술적으로 완벽)
- Beta-Reader: 55점 (독자가 싫어할 것)
- Genre-Validator: 70점 (장르에는 맞음)
→ 편차: 35 (큰 차이)

해석: 기술적으로는 우수하지만 독자 경험이 떨어짐.
      상업성을 중시한다면 개선 필요.
```

## 검토 대상별 상세 가이드

### 1. 세계관 (world.json) 검토

#### 필수 요소 체크리스트

- [ ] 세계 이름 (`name`)
- [ ] 장르 (`genre`)
- [ ] 시대/시간 배경 (`era`, `time_period`)
- [ ] 지리적 구조 (`geography`)
- [ ] 마법/과학 체계 (`magic_system` 또는 `tech_system`)
- [ ] 사회 구조 (`social_structure`)
- [ ] 주요 역사 (`history`)
- [ ] 특수 용어 (`terminology`)

#### Critic 평가 기준 (기술적 품질)

1. **완성도 (Completeness)**: 필수 요소가 모두 포함되었는가?
2. **일관성 (Consistency)**: 설정 간 모순이 없는가?
3. **논리성 (Logic)**: 마법/과학 체계가 논리적인가?
4. **상세도 (Detail)**: 구체적이고 실행 가능한가?
5. **JSON 구조**: 스키마 준수, 오타/오류 없음

**평가 예시**:
```json
{
  "scores": {
    "completeness": 85,
    "consistency": 90,
    "logic": 75,
    "detail": 80,
    "structure": 95
  },
  "total": 85,
  "verdict": "APPROVED"
}
```

#### Beta-Reader 평가 기준 (독자 경험)

1. **매력도 (Appeal)**: 독자가 흥미를 가질 세계인가?
2. **몰입도 (Immersion)**: 세계에 빠져들 수 있는가?
3. **독창성 (Originality)**: 클리셰를 넘어서는가?
4. **공감성 (Relatability)**: 독자가 이해하고 공감할 수 있는가?
5. **상업성 (Marketability)**: 장르 독자층이 좋아할까?

**평가 예시**:
```json
{
  "scores": {
    "appeal": 80,
    "immersion": 75,
    "originality": 70,
    "relatability": 85,
    "marketability": 78
  },
  "total": 77,
  "verdict": "ENGAGING"
}
```

#### Genre-Validator 평가 기준 (장르 적합성)

1. **필수 트로프**: 장르 필수 요소 포함 여부
2. **독자 기대**: 장르 독자가 기대하는 것 제공 여부
3. **장르 규칙**: 장르 컨벤션 준수 여부
4. **차별화**: 클리셰를 넘어서는 요소
5. **시장 적합성**: 현재 트렌드와의 부합도

**장르별 체크리스트**:

**판타지**:
- [ ] 마법 체계 명확
- [ ] 종족/계급 구조
- [ ] 던전/몬스터 (필요 시)
- [ ] 영웅 vs 마왕 구도 (전통 판타지)

**로맨스 판타지**:
- [ ] 귀족/평민 계급 차이
- [ ] 운명적 연결 (소울메이트 등)
- [ ] 금지된 사랑 요소
- [ ] 왕궁/귀족 사회

**현대 로맨스**:
- [ ] 현실적 사회 구조
- [ ] 직장/학교 배경
- [ ] 계약 연애/가짜 연애 (트렌드)

### 2. 캐릭터 (characters/*.json) 검토

#### 필수 요소 체크리스트

- [ ] 기본 정보 (`name`, `age`, `gender`)
- [ ] 외모 (`appearance`)
- [ ] 성격 (`personality`, `mbti`)
- [ ] Want (원하는 것)
- [ ] Need (필요한 것)
- [ ] Fear (두려움)
- [ ] Lie/Truth (거짓 믿음/진실)
- [ ] 백스토리 (`backstory`)
- [ ] 관계 설정 (`relationships`)
- [ ] 캐릭터 아크 (`arc`)

#### Critic 평가 기준

1. **완성도**: 필수 요소가 모두 포함되었는가?
2. **일관성**: Want/Need/Fear/Lie가 논리적으로 연결되는가?
3. **차별성**: 다른 캐릭터와 구별되는가?
4. **아크 명확성**: 성장 경로가 명확한가?
5. **관계 일관성**: relationships가 양방향으로 일치하는가?

**자동 수정 가능**:
- 관계 양방향 불일치 (A→B는 있는데 B→A가 없음)
- JSON 구조 오류

#### Beta-Reader 평가 기준

1. **매력도**: 독자가 관심 가질 요소가 있는가?
2. **공감성**: 독자가 공감하고 응원할 수 있는가?
3. **독특성**: 기억에 남는 캐릭터인가?
4. **내적 갈등**: 흥미로운 내적 갈등이 있는가?
5. **성장 가능성**: 캐릭터 아크가 기대되는가?

**평가 예시**:
```markdown
### 매력도: 75/100

✅ 강점:
- Want (승진) vs Need (자존감) 갈등이 공감됨
- 현실적인 캐릭터 (독자 타겟층과 유사)

⚠️ 약점:
- 대화 목소리가 평범함 (차별성 부족)
- 특별한 매력 포인트가 없음 (심쿵 요소 부재)
```

#### Genre-Validator 평가 기준

1. **장르 적합성**: 캐릭터가 장르에 맞는가?
2. **트로프 부합**: 장르 필수 캐릭터 유형을 충족하는가?
3. **독자 기대**: 장르 독자가 좋아할 캐릭터인가?

**장르별 캐릭터 요구사항**:

**로맨스 여주**:
- 능동적 (수동적 여주는 구시대적)
- 내적 갈등 (자존감, 과거 상처 등)
- 성장 가능성

**로맨스 남주**:
- 츤데레/차도남/다정남 등 유형 명확
- 강점 (능력/외모/재력)
- 여주에게만 보이는 다정함

### 3. 메인 플롯 (main-arc.json) 검토

#### 필수 요소 체크리스트

- [ ] 3막 구조 전환점
- [ ] Inciting Incident
- [ ] Plot Point 1
- [ ] Midpoint
- [ ] Plot Point 2
- [ ] Climax
- [ ] Resolution
- [ ] 핵심 갈등 (`conflicts`)
- [ ] 스테이크 (`stakes`)
- [ ] 극적 질문 (`dramatic_question`)
- [ ] 테마 (`theme`)

#### Critic 평가 기준

1. **구조 완성도**: 3막 구조가 완전한가?
2. **비율 적절성**: Act 1 (25%) / Act 2 (50%) / Act 3 (25%)
3. **인과관계**: 사건 간 논리적 연결이 있는가?
4. **전환점 강도**: 주요 전환점이 충분히 강력한가?
5. **갈등 확대**: 갈등이 점진적으로 확대되는가?

**자동 수정 가능**:
- 막 비율 불균형 (회차 재분배)
- JSON 구조 오류

#### Beta-Reader 평가 기준

1. **페이지 터너**: 독자가 계속 읽고 싶게 만드는가?
2. **감정 이입**: 주인공의 여정에 몰입할 수 있는가?
3. **호기심 유발**: 다음이 궁금한가?
4. **만족도**: 결말이 만족스러울 것 같은가?
5. **이탈 위험**: 지루한 구간이 있는가?

#### Genre-Validator 평가 기준

1. **장르 필수 비트**: 장르 필수 플롯 비트를 포함하는가?
2. **트로프 활용**: 장르 트로프를 효과적으로 사용하는가?
3. **장르 기대**: 장르 독자 기대를 충족하는가?

**장르별 필수 비트**:

**로맨스**:
- Meet-cute (첫 만남)
- Misunderstanding (오해)
- Separation (헤어짐)
- Grand Gesture (대담한 행동)
- HEA (Happily Ever After)

**판타지**:
- Ordinary World
- Call to Adventure
- Training
- Quest
- Final Battle

### 4. 회차 플롯 (chapter_N.json) 검토

#### 필수 요소 체크리스트

- [ ] 챕터 제목
- [ ] 등장 인물 (`characters`)
- [ ] 장소 (`locations`)
- [ ] 시간 (`in_story_time`)
- [ ] 씬 구조 (2-4개)
- [ ] 각 씬의 목적/갈등/비트
- [ ] 복선 plant/payoff
- [ ] 챕터 엔드 훅

#### Critic 평가 기준

1. **구체성**: 집필 가능한 수준으로 상세한가?
2. **씬 구조**: 씬 구조가 논리적인가?
3. **분량 배분**: 씬 간 분량이 적절한가?
4. **일관성**: 캐릭터/세계관과 일치하는가?
5. **메타데이터**: 필수 정보가 모두 있는가?

**자동 수정 가능**:
- 씬 분량 불균형 (target_words 재분배)
- 누락된 메타데이터 (기본값 추가)

#### Beta-Reader 평가 기준

1. **훅**: 챕터 시작/끝 훅이 강력한가?
2. **페이싱**: 지루하거나 급하지 않은가?
3. **감정 비트**: 심쿵/긴장/카타르시스 순간이 있는가?
4. **진행도**: 스토리가 실질적으로 진전되는가?
5. **이탈 위험**: 독자가 이탈할 구간이 있는가?

## 자동 수정 시스템

review 스킬은 일부 문제를 자동으로 수정할 수 있습니다.

### 자동 수정 가능한 이슈

1. **JSON 구조 오류**
   - 누락된 필수 필드 추가
   - 잘못된 타입 수정

2. **막 비율 불균형**
   - 회차 재분배로 25/50/25 비율 맞추기

3. **씬 분량 불균형**
   - target_words 재조정

4. **관계 양방향 불일치**
   - A→B가 있으면 B→A 자동 생성

5. **용어 불일치**
   - world.json 기준으로 용어 통일

### 자동 수정 워크플로우

```typescript
if (verdict === "REVISE" && hasAutoFixableIssues) {
  const answer = await AskUserQuestion(
    "일부 이슈는 자동으로 수정할 수 있습니다. 수정하시겠습니까?",
    ["자동 수정", "직접 수정", "무시하고 진행"]
  )

  if (answer === "자동 수정") {
    // 1. 자동 수정 수행
    await Task({
      subagent_type: "novel-dev:plot-architect",
      model: "opus",
      prompt: `다음 피드백을 반영하여 설계를 개선하세요:

대상 파일: {target_file}

자동 수정 가능한 이슈:
{auto_fixable_issues}

수정 후 원본 파일을 업데이트하세요.
`
    })

    // 2. 수정 결과 검증
    console.log("✅ 자동 수정 완료")

    // 3. 재검토
    console.log("재검토를 시작합니다...")
    // review 스킬 재귀 실행
  }
}
```

## 검토 결과 저장 및 비교

### 검토 결과 저장

모든 검토 결과는 자동으로 저장됩니다:

```
.reviews/
  world-2025-01-24-15-30-00.md
  character-char_001-2025-01-24-16-00-00.md
  plot-2025-01-24-17-00-00.md
```

### 이전 검토와 비교

재검토 시 자동으로 이전 검토와 비교:

```markdown
## 변경 사항 (이전 검토 대비)

**이전 검토**: 2025-01-20 15:00
**현재 검토**: 2025-01-24 17:00

| 항목 | 이전 점수 | 현재 점수 | 변화 |
|------|-----------|-----------|------|
| 기술적 품질 | 65 | 78 | +13 ✅ |
| 독자 경험 | 70 | 82 | +12 ✅ |
| 장르 적합성 | 75 | 75 | 0 - |
| **종합** | **70** | **78** | **+8 ✅** |

**판정 변화**: REVISE → REVISE (개선 중)

### 개선된 이슈
- ✅ 마법 체계 제약 구체화 (world.json:magic_system.limitations)
- ✅ JSON 구조 오류 수정

### 여전히 남은 이슈
- ⚠️ 필수 트로프 누락 (운명적 연결 설정 미포함)

### 새로 발견된 이슈
- ⚠️ 용어 불일치 (메이지/위저드/소서러 혼용)
```

## 옵션 상세

### --strict

엄격한 기준 적용:

```bash
/review --strict
```

**변경사항**:
- APPROVED 기준: 80점 → 85점
- REVISE 기준: 60-79점 → 70-84점
- REJECT 기준: <60점 → <70점

**사용 시기**:
- 상업 출판 목적
- 높은 품질 기준 요구
- 경쟁 플랫폼 출시

### --focus

특정 관점만 검토:

```bash
/review --focus=critic        # 기술적 품질만
/review --focus=reader        # 독자 경험만
/review --focus=genre         # 장르 적합성만
```

**사용 시기**:
- 빠른 점검
- 특정 관점에만 관심
- 디버깅 목적

### --auto-fix

자동 수정 가능한 이슈를 즉시 수정:

```bash
/review --auto-fix
```

**주의사항**:
- 자동 수정 후 수동 확인 권장
- 복잡한 이슈는 수동 수정 필요

### --target

특정 파일만 검토:

```bash
/review --target=world/world.json
/review --target=characters/char_001.json
/review --target=plot/main-arc.json
```

### --skip-checklist

체크리스트 생략 (요약만):

```bash
/review --skip-checklist
```

## 통합 워크플로우

### 완전한 설계 검토 프로세스

```
1. 설계 완료
   ↓
2. /review (자동 감지 또는 대상 지정)
   ↓
3. 병렬 검토 (critic + beta-reader + genre-validator)
   ↓
4. 결과 종합 (점수 + 신뢰도 + 판정)
   ↓
5. 판정에 따른 분기
   ├─ APPROVED (≥80) → 진행 OK
   ├─ REVISE (60-79) → 개선 후 재검토
   └─ REJECT (<60) → 재설계
   ↓
6. REVISE인 경우:
   ├─ 자동 수정 가능? → 자동 수정 → 재검토
   ├─ 수동 수정 필요 → 사용자 수정 → 재검토
   └─ 무시하고 진행 → /gen-plot --skip-review
```

### 반복적 개선 루프

```
설계 v1
  ↓
/review → REJECT (58점)
  ↓
재설계 v2
  ↓
/review → REVISE (72점)
  ↓
개선 v2.1
  ↓
/review → REVISE (78점)
  ↓
미세 조정 v2.2
  ↓
/review → APPROVED (82점)
  ↓
진행!
```

## 자주 하는 실수

### ❌ 나쁜 검토

**문제 1**: 한 관점만 보기
```
"Critic 점수만 높으면 OK"
→ 독자 경험이 나쁘면 상업적 실패 가능
```

**문제 2**: 점수만 보기
```
"78점이니까 REVISE네, 수정해야지"
→ 어떤 이슈가 있는지, 우선순위가 뭔지 확인 안 함
```

**문제 3**: 신뢰도 무시
```
신뢰도 LOW인데 판정을 맹신
→ 의견이 갈리면 직접 판단 필요
```

### ✅ 좋은 검토

**접근 1**: 다각도 확인
```
- Critic: 85점 (기술적으로 우수)
- Beta-Reader: 65점 (독자 경험 부족)
- Genre: 75점 (장르에는 맞음)

→ 기술적으로는 훌륭하지만 독자가 지루해할 수 있음
→ 독자 경험 개선에 집중
```

**접근 2**: 우선순위 파악
```
총 10개 이슈 발견
- 우선순위 높음: 3개 (치명적)
- 우선순위 중간: 5개 (개선 권장)
- 우선순위 낮음: 2개 (선택)

→ 우선순위 높음부터 순차적으로 수정
```

**접근 3**: 신뢰도 고려
```
신뢰도 LOW (편차 40)
- Critic: 90점
- Beta-Reader: 50점
- Genre: 70점

→ 의견이 크게 갈림
→ 타겟 독자가 누구인지에 따라 판단
   - 기술적 완성도 중시 → 진행
   - 상업성 중시 → Beta-Reader 피드백 수용
```

## 마무리

review 스킬은 novel-dev의 **품질 게이트**입니다.

**핵심 원칙**:
1. 다각도 검토 (3개 관점)
2. 명확한 판정 (APPROVED/REVISE/REJECT)
3. 구체적 피드백 (파일명:줄번호)
4. 우선순위 지정 (높음/중간/낮음)
5. 신뢰도 제공 (HIGH/MEDIUM/LOW)

**목표**:
"설계가 완료되었는데, 진행해도 될까?"라는 질문에 명확한 답을 주는 것.

APPROVED를 받으면 자신 있게 다음 단계로 진행할 수 있습니다.
