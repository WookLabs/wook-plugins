---
name: analyze
description: 소설 요소(캐릭터, 플롯, 세계관, 문체, 페이싱) 체계적 분석
user-invocable: true
allowed-tools:
  - Read
  - Glob
  - Grep
  - Task
  - AskUserQuestion
---

# Analyze Skill

"뭔가 이상한데", "분석해줘" 같은 범용 분석 요청에 응답하는 스킬입니다.

## 워크플로우

### Phase 1: 분석 대상 파악

사용자가 구체적으로 지정하지 않은 경우 질문:

```
AskUserQuestion:
  question: "무엇을 분석할까요?"
  options:
    - "전체 프로젝트 구조"
    - "특정 캐릭터"
    - "플롯 구조"
    - "세계관 일관성"
    - "문체/스타일"
    - "페이싱"
    - "독자 반응 예측"
```

### Phase 2: 컨텍스트 수집

분석 대상에 따라 필요한 파일 로드:

**캐릭터 분석**:
```
- characters/{char_id}.json
- chapters/*.json (캐릭터 등장 회차)
- context/character-timeline/{char_id}.md
```

**플롯 분석**:
```
- plot/main-arc.json
- plot/sub-arcs/*.json
- chapters/*.json
- plot/foreshadowing.json
- plot/hooks.json
```

**세계관 분석**:
```
- world/world.json
- world/locations.json
- world/timeline.json
- chapters/*.json (세계관 활용 확인)
```

**문체 분석**:
```
- meta/style-guide.json
- manuscripts/chapter_*.md (실제 원고)
- templates/prose-rules.json
```

**페이싱 분석**:
```
- chapters/*.json (scene 구조)
- plot/main-arc.json (act 구조)
- manuscripts/chapter_*.md (실제 글자수)
```

**전체 구조 분석**:
```
- BLUEPRINT.md
- 모든 plot/*, characters/*, world/* 파일
```

### Phase 3: 심층 분석 위임

architect 에이전트에게 심층 분석 위임:

```typescript
Task(subagent_type="novel-dev:plot-architect",
  model="opus",
  prompt=`다음 소설 요소를 심층 분석하세요:

분석 대상: {target}
분석 포커스: {focus}

컨텍스트:
{gathered_context}

분석 기준:
1. 일관성 (Consistency)
2. 논리성 (Logic)
3. 완성도 (Completeness)
4. 독창성 (Originality)
5. 상업성 (Commercial Viability)

각 기준에 대해:
- 점수 (0-100)
- 강점
- 약점
- 구체적 예시 (파일명:줄번호)
- 개선 제안
`)
```

### Phase 4: 결과 종합 및 시각화

```markdown
# {대상} 분석 결과

## 종합 점수: {total}/100

### 카테고리별 점수
| 카테고리 | 점수 | 평가 |
|---------|------|------|
| 일관성 | {N}/100 | ✅ 우수 / ⚠️ 보통 / ❌ 미흡 |
| 논리성 | {N}/100 | ... |
| 완성도 | {N}/100 | ... |
| 독창성 | {N}/100 | ... |
| 상업성 | {N}/100 | ... |

## 주요 발견사항

### ✅ 강점
1. {강점 1}
   - 예시: `{파일명}:{줄번호}`
   - 설명: {상세}

2. {강점 2}
   ...

### ⚠️ 주의사항
1. {주의사항 1}
   - 예시: `{파일명}:{줄번호}`
   - 설명: {상세}
   - 영향: {독자 경험에 미치는 영향}

### ❌ 문제점
1. {문제점 1}
   - 예시: `{파일명}:{줄번호}`
   - 설명: {상세}
   - 심각도: 높음/보통/낮음
   - 수정 제안: {구체적 방법}

## 심층 분석

### {분석 카테고리 1}
{상세 분석 내용}

### {분석 카테고리 2}
{상세 분석 내용}

## 권장 조치

### 우선순위 높음
1. {즉시 수정 필요한 사항}
2. ...

### 우선순위 중간
1. {개선하면 좋은 사항}
2. ...

### 우선순위 낮음
1. {선택적 개선 사항}
2. ...

## 다음 단계

{분석 결과를 바탕으로 권장하는 다음 행동}
```

## 분석 유형별 가이드

### 캐릭터 분석

**분석 포인트**:
1. **일관성**: 행동/대사/동기가 캐릭터 프로필과 일치하는가?
2. **발전**: 캐릭터 아크가 명확하게 진행되는가?
3. **차별성**: 다른 캐릭터와 구별되는가?
4. **매력**: 독자가 공감하고 관심 가질 요소가 있는가?
5. **관계성**: 다른 캐릭터와의 역학이 자연스러운가?

**체크리스트**:
- [ ] Want vs Need가 명확한가?
- [ ] 내적 갈등이 설득력 있는가?
- [ ] 대화 목소리가 독특한가?
- [ ] 행동 패턴이 일관적인가?
- [ ] 백스토리가 현재 행동을 지지하는가?
- [ ] 캐릭터 아크가 플롯과 연동되는가?

### 플롯 분석

**분석 포인트**:
1. **구조**: 3막 구조가 균형 잡혀 있는가?
2. **인과관계**: 사건이 논리적으로 연결되는가?
3. **페이싱**: 긴장과 이완의 리듬이 적절한가?
4. **복선**: 모든 복선이 적절히 회수되는가?
5. **갈등**: 갈등이 점진적으로 확대되는가?

**체크리스트**:
- [ ] Inciting Incident가 명확한가?
- [ ] Plot Point 1/2가 강력한가?
- [ ] Midpoint가 게임을 바꾸는가?
- [ ] All is Lost 순간이 있는가?
- [ ] Climax가 필연적이면서 놀라운가?
- [ ] 서브플롯이 메인플롯을 지지하는가?
- [ ] 모든 떡밥이 회수되는가?

### 세계관 분석

**분석 포인트**:
1. **일관성**: 설정이 전체적으로 일관적인가?
2. **논리성**: 세계 법칙이 논리적인가?
3. **깊이**: 세계가 입체적으로 느껴지는가?
4. **통합**: 세계관이 플롯과 잘 통합되는가?
5. **독창성**: 장르 클리셰를 넘어서는가?

**체크리스트**:
- [ ] 마법/과학 체계가 명확한가?
- [ ] 사회 구조가 설명되는가?
- [ ] 지리/역사가 정립되어 있는가?
- [ ] 용어가 일관적으로 사용되는가?
- [ ] 세계관 제약이 플롯에 활용되는가?
- [ ] 묘사와 설정이 일치하는가?

### 문체 분석

**분석 포인트**:
1. **일관성**: 톤/목소리가 일정한가?
2. **적절성**: 장르/독자층에 맞는가?
3. **리듬**: 문장 호흡이 자연스러운가?
4. **생동감**: Show vs Tell 균형이 좋은가?
5. **독창성**: 개성 있는 표현인가?

**체크리스트**:
- [ ] 필터 워드가 제거되었는가?
- [ ] 능동태 위주인가?
- [ ] 클리셰 표현이 적은가?
- [ ] 감각 묘사가 풍부한가?
- [ ] 대화가 자연스러운가?
- [ ] 문장 길이가 다양한가?

### 페이싱 분석

**분석 포인트**:
1. **전체 리듬**: Act별 배분이 적절한가?
2. **회차 리듬**: 긴장-이완 패턴이 있는가?
3. **장면 밸런스**: Action/Dialogue/Description 비율
4. **정보 공개**: 너무 빠르거나 느리지 않은가?
5. **독자 몰입**: 이탈 위험 구간은?

**체크리스트**:
- [ ] Act 1이 너무 길지 않은가?
- [ ] Midpoint가 중간에 있는가?
- [ ] 클라이맥스 전 긴장이 최고조인가?
- [ ] 회차별 분량이 일정한가?
- [ ] 회차 끝 훅이 강력한가?
- [ ] 지루한 구간이 있는가?

## 자주 묻는 질문 대응

### "왜 재미없지?"

독자 경험 분석에 집중:
1. beta-reader 에이전트로 engagement 평가
2. 이탈 위험 구간 식별
3. 훅/심쿵 포인트 부족 여부
4. 페이싱 문제 진단

### "뭔가 이상한데"

다각도 스캔:
1. 일관성 검사 (캐릭터/플롯/세계관)
2. 논리적 허점 탐지
3. 타임라인 불일치
4. 톤 불일치
5. 장르 부적합 요소

### "이게 맞나?"

검증 중심 분석:
1. 장르 컨벤션 준수 여부
2. 독자 기대 충족도
3. 상업성 평가
4. 기술적 완성도

## 출력 원칙

1. **구체성**: 항상 파일명:줄번호로 예시 제공
2. **실행 가능성**: 모든 피드백은 구체적 개선안과 함께
3. **우선순위**: 중요도/긴급도로 정렬
4. **긍정+개선**: 강점을 먼저 언급, 그 다음 개선점
5. **맥락**: 단순 지적이 아닌 이유와 영향 설명

## 옵션

### --focus

특정 영역만 분석:
```bash
/analyze --focus=character
/analyze --focus=plot
/analyze --focus=pacing
```

### --depth

분석 깊이 조절:
```bash
/analyze --depth=quick    # 빠른 스캔 (haiku)
/analyze --depth=standard # 표준 분석 (sonnet)
/analyze --depth=deep     # 심층 분석 (opus)
```

### --target

분석 대상 지정:
```bash
/analyze --target=char_001
/analyze --target=chapters/chapter_001.json
/analyze --target=world/world.json
```

## 에이전트 활용

| 분석 대상 | 에이전트 | 모델 |
|-----------|---------|------|
| 플롯 구조 | plot-architect | opus |
| 캐릭터 심리 | plot-architect | opus |
| 독자 반응 | beta-reader | sonnet |
| 기술적 품질 | critic | opus |
| 세계관 일관성 | lore-keeper | sonnet |
| 문체 | editor | sonnet |

## 예시 시나리오

### 시나리오 1: 캐릭터가 평면적이라는 피드백

1. 캐릭터 파일 로드
2. 등장 회차 스캔
3. 행동/대사 패턴 분석
4. Want/Need 검증
5. 캐릭터 아크 추적
6. 구체적 개선안 제시

### 시나리오 2: 플롯이 지루하다는 피드백

1. 전체 플롯 구조 로드
2. 페이싱 분석
3. 긴장-이완 리듬 체크
4. 떡밥/복선 활용도
5. 이탈 위험 구간 식별
6. 리듬 개선 제안

### 시나리오 3: 세계관이 헷갈린다는 피드백

1. 세계관 설정 파일 로드
2. 실제 사용 사례 검색
3. 불일치 사항 탐지
4. 용어 일관성 체크
5. 독자 혼란 지점 예측
6. 명확화 방안 제시
