# Analyze Skill - Detailed Guide

## 목적

`analyze` 스킬은 소설 프로젝트의 다양한 요소를 체계적으로 분석하는 범용 분석 도구입니다.

## 핵심 차별점

| 스킬 | 목적 | 타이밍 | 출력 |
|------|------|--------|------|
| **analyze** | 문제 진단, 깊이 있는 분석 | 설계 중, 집필 중, 완료 후 | 분석 보고서 + 권장사항 |
| **review** | 설계 승인/거부 판정 | 설계 완료 후 | 점수 + 판정 (APPROVED/REVISE/REJECT) |
| **consistency-check** | 불일치 탐지 | 집필 중, 완료 후 | 오류 목록 |
| **evaluate** | 완성도 평가 | 챕터/막 완료 후 | 점수 + 품질 리포트 |

## 사용 시나리오

### 1. 막연한 불편함 ("뭔가 이상한데")

**상황**: 사용자가 구체적으로 뭐가 문제인지 모르지만 뭔가 이상함을 느낌

**워크플로우**:
```
1. 사용자 의도 파악
   - "어떤 부분이 이상하게 느껴지나요?"
   - 전체? 특정 캐릭터? 특정 회차?

2. 전방위 스캔
   - 일관성 체크
   - 논리적 허점 탐지
   - 페이싱 분석
   - 톤 불일치 체크

3. 문제 식별 및 우선순위 지정
   - 치명적 문제 (즉시 수정 필요)
   - 개선 권장 사항
   - 선택적 개선 사항

4. 구체적 개선안 제시
```

**예시 출력**:
```markdown
## 분석 결과: 페이싱 불균형 발견

### 진단
챕터 10-15 구간에서 독자 이탈 위험이 높습니다.

### 원인
- 행동 없이 내적 독백만 5회차 연속
- 플롯 진행이 정체됨
- 새로운 정보/사건 부재

### 영향
- 독자가 지루함을 느낄 가능성: 85%
- 예상 이탈률: 40%

### 권장 조치
1. [우선순위 높음] 챕터 12에 외부 갈등 추가
   - 위치: `chapters/chapter_012.json:scenes`
   - 제안: 라이벌 캐릭터 등장 또는 사건 발생

2. [우선순위 중간] 내적 독백 50% 축소
   - 대상: 챕터 10, 11, 13
   - 방법: 대화나 행동으로 전환
```

### 2. 캐릭터 분석

**상황**: "이 캐릭터가 매력이 없는 것 같아", "캐릭터가 평면적이야"

**워크플로우**:
```
1. 캐릭터 파일 로드
   - characters/{char_id}.json

2. 등장 회차 추적
   - Grep으로 캐릭터 등장 회차 검색
   - 대사, 행동, 내적 독백 추출

3. 심층 분석 (architect 에이전트)
   - Want vs Need 명확성
   - 내적 갈등의 설득력
   - 캐릭터 아크 진행도
   - 대화 목소리 독특성
   - 행동 패턴 일관성

4. 타 캐릭터와 비교
   - 차별성 평가
   - 관계 역학 분석

5. 구체적 개선안
```

**예시 출력**:
```markdown
## 유나 (char_001) 캐릭터 분석

### 종합 평가: 72/100 (개선 필요)

| 항목 | 점수 | 평가 |
|------|------|------|
| Want/Need 명확성 | 85/100 | ✅ 명확함 |
| 내적 갈등 설득력 | 65/100 | ⚠️ 약함 |
| 캐릭터 아크 | 70/100 | ⚠️ 정체 구간 있음 |
| 대화 목소리 | 60/100 | ⚠️ 개성 부족 |
| 행동 일관성 | 90/100 | ✅ 일관적 |

### 주요 발견

#### ✅ 강점
1. **Want (승진) vs Need (자존감)가 명확함**
   - 예시: `chapters/chapter_001.json:scene_1`
   - 설명: 외적 목표와 내적 필요가 충돌하는 구조가 좋음

2. **행동 패턴이 일관적**
   - 스트레스 받으면 술 마시기 (ch 1, 5, 12)
   - 회피 성향 명확

#### ⚠️ 약점
1. **대화 목소리가 다른 인물과 구별 안 됨**
   - 예시: `manuscripts/chapter_003.md:45`
   - 문제: 유나의 대사를 다른 캐릭터가 해도 위화감 없음
   - 개선: 말버릇, 어휘 선택, 문장 구조로 차별화 필요

2. **내적 갈등이 반복적**
   - 챕터 3, 7, 11에서 동일한 고민 반복
   - 캐릭터가 성장하지 않는 느낌
   - 개선: 각 회차마다 갈등의 레이어를 추가

### 권장 조치

**우선순위 높음**
1. 유나만의 대화 패턴 정립
   - 예: "음..." 자주 사용, 완곡 어법, 질문 형태로 말하기
   - 적용: 챕터 1-15 대사 전면 수정

**우선순위 중간**
2. 내적 갈등 심화
   - 챕터 7: "승진이 정말 원하는 거야?" → "승진해도 행복할까?"
   - 챕터 11: "행복할까?" → "행복이 뭐지?"

**우선순위 낮음**
3. 외적 특징 강화
   - 습관: 머리카락 만지기, 펜 돌리기 등 추가
```

### 3. 플롯 분석

**상황**: "플롯이 지루해", "긴장감이 없어"

**워크플로우**:
```
1. 플롯 구조 로드
   - plot/main-arc.json
   - chapters/*.json

2. 구조 분석
   - 3막 비율 확인
   - 주요 전환점 위치
   - 갈등 확대 곡선

3. 페이싱 분석
   - 회차별 긴장도 추적
   - 긴장-이완 리듬 평가
   - 정체 구간 식별

4. 떡밥/복선 활용도
   - 미회수 복선
   - 떡밥 밀도
   - 독자 호기심 유지 요소

5. 개선안 제시
```

**예시 출력**:
```markdown
## 플롯 분석 결과

### 종합 평가: 68/100 (개선 필요)

### 구조 문제

#### 1. 2막 비중 과다
**문제**:
- 현재: Act 1 (20%) / Act 2 (60%) / Act 3 (20%)
- 이상: Act 1 (25%) / Act 2 (50%) / Act 3 (25%)

**영향**:
- 2막이 늘어지는 느낌
- Climax 전에 독자 피로도 증가

**해결**:
- 2막 챕터 13-40 → 13-35로 축소
- 챕터 36-40을 3막으로 재분류

#### 2. Midpoint가 약함
**문제**:
- 위치: `chapters/chapter_025.json`
- 현재: 소소한 깨달음 (내적 변화)
- 기대: 외적 상황을 뒤집는 사건

**개선**:
- 챕터 25에 외부 사건 추가
- 예: 비밀 폭로, 적대자 등장, 계획 실패 등

### 페이싱 문제

#### 이탈 위험 구간
| 회차 | 위험도 | 원인 | 해결 |
|------|--------|------|------|
| 10-15 | 75% | 행동 없이 회상/독백만 | 외부 갈등 추가 |
| 22-24 | 60% | 플롯 진행 정체 | 서브플롯 활성화 |
| 33-36 | 55% | 긴장도 하락 | Dark Night 강화 |

### 복선 활용도

#### ✅ 잘 활용된 복선
- `fore_001`: 남주의 비밀 → 챕터 8 심기, 35 회수

#### ⚠️ 미회수 복선
- `fore_003`: 여주 어머니 언급 (ch 12) → 회수 계획 없음
- `fore_007`: 신비한 목걸이 (ch 6) → 회수 누락

**조치**: 복선 회수 챕터 지정 필요
```

### 4. 세계관 분석

**상황**: "세계관이 헷갈려", "설정이 모순되는 것 같아"

**워크플로우**:
```
1. 세계관 파일 로드
   - world/world.json
   - world/locations.json
   - world/timeline.json

2. 일관성 체크
   - 마법 체계 규칙
   - 사회 구조
   - 용어 사용

3. 실제 활용 사례 검색
   - Grep으로 세계관 요소 사용 추적
   - 설정과 사용 비교

4. 모순 탐지
   - 설정 내부 모순
   - 설정-사용 불일치

5. 독자 혼란 예측
```

**예시 출력**:
```markdown
## 세계관 분석 결과

### 일관성 점수: 78/100

### ⚠️ 발견된 모순

#### 1. 마법 체계 불일치
**설정**: `world/world.json:magic_system`
```json
{
  "mana_cost": "마법 사용 시 마나 소모",
  "regeneration": "하루 10% 회복"
}
```

**사용 사례**: `manuscripts/chapter_015.md:234`
```
유나는 연속으로 5번의 마법을 시전했다.
```

**문제**:
- 마나 소모 규칙 위반
- 설정에 따르면 2-3번이 한계

**수정안**:
- 설정 변경: "긴급 시 생명력으로 대체 가능" 추가
- 또는 사용 사례 수정: 마법 횟수 축소

#### 2. 용어 불일치
| 용어 | world.json | 실제 사용 |
|------|-----------|----------|
| 마법사 칭호 | "메이지" | ch 3: "위저드", ch 7: "소서러" |
| 화폐 단위 | "크라운" | ch 10: "골드", ch 15: "크레딧" |

**수정**: 용어 통일 필요

### ✅ 잘 활용된 세계관

1. **계급 체계가 플롯과 연동**
   - 설정: 귀족/평민 구분
   - 활용: 주인공 갈등의 핵심

2. **지리가 스토리에 영향**
   - 설정: 북부/남부 기후 차이
   - 활용: 챕터 20 여정에서 자연스럽게 활용
```

### 5. 문체 분석

**상황**: "문체가 들쭉날쭉해", "톤이 안 맞는 것 같아"

**워크플로우**:
```
1. 스타일 가이드 로드
   - meta/style-guide.json

2. 실제 원고 샘플링
   - manuscripts/*.md (챕터 1, 10, 20, 30, 40)

3. 문체 요소 분석
   - 문장 길이 분포
   - 능동/수동태 비율
   - 감각 묘사 밀도
   - 대화/서술/내적독백 비율
   - 필터 워드 빈도

4. 톤 일관성
   - 장면 유형별 톤 비교
   - 캐릭터 POV별 톤 차이

5. 장르 적합성
```

**예시 출력**:
```markdown
## 문체 분석 결과

### 일관성 점수: 82/100

### 문장 구조 분석

| 챕터 | 평균 문장 길이 | 능동태 비율 | 평가 |
|------|----------------|-------------|------|
| 1 | 18단어 | 85% | ✅ 좋음 |
| 10 | 25단어 | 70% | ⚠️ 약간 느림 |
| 20 | 16단어 | 90% | ✅ 좋음 |
| 30 | 32단어 | 55% | ❌ 문제 있음 |

**발견**:
- 챕터 30 구간에서 문장이 급격히 길어짐
- 수동태 사용 증가 → 에너지 저하

### 톤 불일치

#### 문제 구간: 챕터 15
**설정**: 로맨틱 코미디 (가벼운 톤)

**실제**: `manuscripts/chapter_015.md:100-150`
```
어둠이 그녀를 삼켰다. 절망의 나락으로...
```

**문제**: 과도하게 무거운 톤 (비극/다크판타지 느낌)

**수정**: 톤 조정 필요
```
유나는 한숨을 쉬었다. 최악이었다.
```

### 필터 워드 과다 사용

**발견**:
- "느꼈다": 47회 (목표: <10회)
- "보았다": 32회 (목표: <10회)
- "생각했다": 28회 (목표: <10회)

**영향**: 독자와 장면 사이에 거리감 형성

**수정 예시**:
❌ "유나는 춥다고 느꼈다."
✅ "한기가 유나의 팔을 타고 올라왔다."
```

## 분석 깊이 레벨

### Quick (haiku)
- 소요: 1-2분
- 범위: 표면적 스캔
- 용도: 빠른 점검, 명백한 문제 탐지

### Standard (sonnet)
- 소요: 5-10분
- 범위: 중간 깊이 분석
- 용도: 일반적 분석 작업

### Deep (opus)
- 소요: 15-30분
- 범위: 종합적 심층 분석
- 용도: 근본 원인 분석, 복잡한 문제

## 에이전트 활용 전략

| 분석 대상 | 1차 분석 | 2차 분석 (필요 시) |
|-----------|---------|-------------------|
| 플롯 | plot-architect (opus) | critic (opus) |
| 캐릭터 | plot-architect (opus) | beta-reader (sonnet) |
| 세계관 | lore-keeper (sonnet) | critic (opus) |
| 문체 | editor (sonnet) | - |
| 페이싱 | beta-reader (sonnet) | engagement-optimizer (sonnet) |
| 독자 경험 | beta-reader (sonnet) | engagement-optimizer (sonnet) |

## 자주 하는 실수

### ❌ 나쁜 분석
```
"캐릭터가 매력이 없습니다."
```
- 구체성 없음
- 예시 없음
- 개선안 없음

### ✅ 좋은 분석
```
"캐릭터가 매력이 부족합니다.

원인:
1. Want vs Need가 불명확
   - 예시: `characters/char_001.json:want` - "행복해지기" (너무 추상적)

2. 대화 목소리가 평범함
   - 예시: `manuscripts/chapter_003.md:45-67`
   - 다른 캐릭터와 구별 불가

개선안:
1. Want을 구체화: "행복해지기" → "CEO 승진"
2. 말버릇 추가: "음...", "그러니까..." 자주 사용
3. 어휘 특성: 비즈니스 용어 섞어 쓰기
```

## 출력 템플릿

모든 분석은 다음 구조를 따릅니다:

```markdown
# {대상} 분석 결과

## 종합 평가
- 점수: {N}/100
- 등급: {S|A|B|C|F}
- 한 줄 요약

## 카테고리별 평가
{표 형식}

## 주요 발견사항

### ✅ 강점
{구체적 예시 + 설명}

### ⚠️ 주의사항
{구체적 예시 + 영향 + 개선 제안}

### ❌ 문제점
{구체적 예시 + 심각도 + 수정 방법}

## 심층 분석
{상세 내용}

## 권장 조치
{우선순위별 정렬}

## 다음 단계
{후속 작업 제안}
```

## 통합 활용 예시

### 완전한 프로젝트 진단

```bash
# 1단계: 전체 구조 분석
/analyze --target=project --depth=deep

# 2단계: 문제 영역 집중 분석
/analyze --focus=plot --depth=deep
/analyze --focus=character --target=char_001

# 3단계: 개선 후 재분석
# (수정 작업)
/analyze --target=plot/main-arc.json --compare-previous
```

### 회차별 분석

```bash
# 특정 회차가 이상할 때
/analyze --target=chapters/chapter_015.json --depth=standard

# 페이싱 집중 분석
/analyze --focus=pacing --target=chapters/chapter_010-020.json
```

## 분석 vs 검토 vs 평가

### 언제 `analyze`를 쓸까?

**사용 상황**:
- "왜 그런지 모르겠는데 이상해"
- "문제가 뭔지 찾아줘"
- "이 캐릭터 어때?"
- "플롯 구조 괜찮아?"

**목적**: 문제 진단, 원인 분석, 개선 방향 제시

### 언제 `review`를 쓸까?

**사용 상황**:
- "설계 완성했어, 진행해도 돼?"
- "이 설정 승인 가능해?"

**목적**: 승인/거부 판정, 품질 게이트

### 언제 `evaluate`를 쓸까?

**사용 상황**:
- "이 챕터 점수 몇 점이야?"
- "퀄리티 체크해줘"

**목적**: 완성도 평가, 점수 부여

## 마무리

`analyze` 스킬은 novel-dev 플러그인의 "진단 도구"입니다.

**핵심 원칙**:
1. 항상 구체적 예시 제공 (파일명:줄번호)
2. 문제만 지적하지 말고 해결책 제시
3. 우선순위 명확히 (치명적/중요/선택적)
4. 긍정적 요소도 함께 언급 (강점 강화)

사용자가 "뭔가 이상한데"라고 느낄 때, `analyze`가 정확히 무엇이 이상한지 찾아내는 것이 목표입니다.
