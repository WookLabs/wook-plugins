{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "https://rtl-forge/schemas/testbench-gen-output.schema.json",
  "title": "Testbench Generation Output",
  "description": "Output schema for Phase 2: Testbench Generation",
  "type": "object",
  "required": ["phase", "status", "timestamp", "testbenches"],
  "properties": {
    "phase": {
      "type": "string",
      "const": "testbench-generation"
    },
    "status": {
      "type": "string",
      "enum": ["pending", "in_progress", "complete", "failed"]
    },
    "timestamp": {
      "type": "string",
      "format": "date-time"
    },
    "testbenches": {
      "type": "array",
      "description": "Generated testbench files",
      "items": {
        "type": "object",
        "required": ["module_name", "file_path", "framework"],
        "properties": {
          "module_name": {
            "type": "string",
            "description": "Target module under test"
          },
          "file_path": {
            "type": "string",
            "description": "Generated testbench file path"
          },
          "framework": {
            "type": "string",
            "description": "Verification framework",
            "enum": ["SystemVerilog", "UVM", "CocoTB", "PyVSC"]
          },
          "components": {
            "type": "object",
            "properties": {
              "driver": {
                "type": "boolean",
                "description": "Has driver component"
              },
              "monitor": {
                "type": "boolean",
                "description": "Has monitor component"
              },
              "scoreboard": {
                "type": "boolean",
                "description": "Has scoreboard component"
              },
              "coverage_collector": {
                "type": "boolean",
                "description": "Has coverage collector"
              },
              "assertions": {
                "type": "boolean",
                "description": "Has SVA assertions"
              }
            }
          },
          "interfaces": {
            "type": "array",
            "description": "Generated interfaces",
            "items": {
              "type": "object",
              "properties": {
                "name": {"type": "string"},
                "type": {"type": "string", "enum": ["clock", "reset", "bus", "custom"]},
                "signals": {
                  "type": "array",
                  "items": {"type": "string"}
                }
              }
            }
          },
          "clock_generation": {
            "type": "object",
            "properties": {
              "period_ns": {"type": "number", "minimum": 0},
              "duty_cycle": {"type": "number", "minimum": 0, "maximum": 100}
            }
          },
          "reset_sequence": {
            "type": "object",
            "properties": {
              "duration_cycles": {"type": "integer", "minimum": 1},
              "polarity": {"type": "string", "enum": ["active_high", "active_low"]}
            }
          }
        }
      }
    },
    "verification_plan": {
      "type": "object",
      "description": "Generated verification plan",
      "properties": {
        "test_scenarios": {
          "type": "array",
          "items": {
            "type": "object",
            "properties": {
              "name": {"type": "string"},
              "description": {"type": "string"},
              "priority": {"type": "string", "enum": ["critical", "high", "medium", "low"]},
              "coverage_targets": {
                "type": "array",
                "items": {"type": "string"}
              }
            }
          }
        },
        "coverage_goals": {
          "type": "object",
          "properties": {
            "code_coverage": {"type": "number", "minimum": 0, "maximum": 100},
            "functional_coverage": {"type": "number", "minimum": 0, "maximum": 100},
            "assertion_coverage": {"type": "number", "minimum": 0, "maximum": 100}
          }
        }
      }
    },
    "metrics": {
      "type": "object",
      "properties": {
        "testbench_count": {"type": "integer", "minimum": 0},
        "total_lines_generated": {"type": "integer", "minimum": 0},
        "reusable_components": {"type": "integer", "minimum": 0},
        "automation_level": {
          "type": "string",
          "enum": ["basic", "intermediate", "advanced", "full"]
        }
      }
    },
    "outputs": {
      "type": "object",
      "properties": {
        "report_path": {"type": "string"},
        "component_library": {"type": "string"},
        "config_file": {"type": "string"}
      }
    }
  }
}
